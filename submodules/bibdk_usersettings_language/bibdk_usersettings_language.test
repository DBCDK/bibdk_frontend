<?php

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

class BibdkUserLanguageSettingsWebTestCase extends DrupalWebTestCase {

  public static function getInfo() {
    return array(
      'name' => t('Bibdk Usersettings : language Test'),
      'description' => t('Webtest of bibdk user language settings functionality'),
      'group' => t('bibliotek.dk'),
    );
  }

  public function setUp() {
    parent::setUp('bibdk_usersettings', 'bibdk_usersettings_language', 'bibdk_language_settings', 'bibdk_test_provider', 'ding_provider');
    variable_set('bibdk_provider_webservice_url', 'http://guesstimate.dbc.dk/~mmj/OpenUserinfo/tags/1.4/server.php');
    variable_set('bibdk_provider_security_code', 'testhest');
  }

  public function testRunner() {
    $this->testMenuItemExists();
  }

  private function testMenuItemExists() {
    $this->privileged_user = $this->drupalCreateUser(array(
      'access user profiles',
    ));
    $this->drupalLogin($this->privileged_user);
    $this->drupalGet('user');
    $this->assertLink('Settings');
    $this->clickLink('Settings');

    $this->assertText('Language settings');
    $this->assertText('Danish (Dansk)');
    $this->assertText('English');
  }

}
